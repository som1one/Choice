# üöÄ –ì–∞–π–¥ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ reg.ru

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-—Ö–æ—Å—Ç–∏–Ω–≥–∞)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é)
3. [–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
4. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS/VDS](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–Ω–∞-vpsvds)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ RabbitMQ](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-rabbitmq)
8. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞ –Ω–∞ reg.ru:

1. **VPS/VDS —Å–µ—Ä–≤–µ—Ä** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚úÖ
   - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–µ—Ä–≤–µ—Ä–æ–º
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ .NET 8.0
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ú–∏–Ω–∏–º—É–º: 2 CPU, 4 GB RAM, 20 GB SSD

2. **Windows —Ö–æ—Å—Ç–∏–Ω–≥** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .NET Framework / .NET Core
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

3. **–û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** (Cloud)
   - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
   - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –û–±—ã—á–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ (Linux/PHP) **–ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç** –¥–ª—è .NET 8.0 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞

1. –í –ø–∞–Ω–µ–ª–∏ reg.ru –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–æ–º–µ–Ω `choice-api.ru` (–∫–∞–∫ –≤—ã —É–∂–µ –Ω–∞—á–∞–ª–∏)
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS (–¥–æ 24 —á–∞—Å–æ–≤)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `ping choice-api.ru`

### –®–∞–≥ 2: –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–∫–∞–∂–∏—Ç–µ **VPS/VDS** –Ω–∞ reg.ru —Å:
- **–û–°:** Ubuntu 22.04 LTS –∏–ª–∏ Windows Server 2022
- **RAM:** –º–∏–Ω–∏–º—É–º 4 GB (–ª—É—á—à–µ 8 GB –¥–ª—è –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤)
- **CPU:** –º–∏–Ω–∏–º—É–º 2 —è–¥—Ä–∞
- **–î–∏—Å–∫:** –º–∏–Ω–∏–º—É–º 50 GB SSD
- **IP:** —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –∞–¥—Ä–µ—Å

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ .NET (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö .NET –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).

### –í–∞—Ä–∏–∞–Ω—Ç 3: Reverse Proxy (Nginx/IIS)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Nginx –∏–ª–∏ IIS –∫–∞–∫ reverse proxy –ø–µ—Ä–µ–¥ .NET –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

---

## üñ•Ô∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS/VDS

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

**–î–ª—è Linux (Ubuntu):**
```bash
ssh root@–≤–∞—à_ip_–∞–¥—Ä–µ—Å
```

**–î–ª—è Windows:**
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ RDP (Remote Desktop)

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ .NET 8.0 Runtime

**–ù–∞ Linux (Ubuntu):**
```bash
# –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Microsoft
wget https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
rm packages-microsoft-prod.deb

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ .NET 8.0 Runtime
sudo apt-get update
sudo apt-get install -y aspnetcore-runtime-8.0

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
dotnet --version
```

**–ù–∞ Windows Server:**
1. –°–∫–∞—á–∞–π—Ç–µ [.NET 8.0 Runtime](https://dotnet.microsoft.com/download/dotnet/8.0)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**SQL Server:**
```bash
# –ù–∞ Linux - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SQL Server –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ –ë–î
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

**RabbitMQ (–¥–ª—è Event Bus):**
```bash
# –ù–∞ Ubuntu
sudo apt-get update
sudo apt-get install -y rabbitmq-server
sudo systemctl start rabbitmq-server
sudo systemctl enable rabbitmq-server

# –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo rabbitmqctl add_user admin –≤–∞—à_–ø–∞—Ä–æ–ª—å
sudo rabbitmqctl set_user_tags admin administrator
sudo rabbitmqctl set_permissions -p / admin ".*" ".*" ".*"
```

### –®–∞–≥ 4: –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

**–ù–∞ –≤–∞—à–µ–º –ü–ö (Windows):**

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å —Å–µ—Ä–≤–∏—Å–æ–º
cd services/services/authentication

# –°–æ–±–µ—Ä–∏—Ç–µ Release –≤–µ—Ä—Å–∏—é
dotnet publish -c Release -o ./publish

# –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
# - authentication
# - client-service/src/ClientService.Api
# - company-service
# - category-service
# - chat
# - ordering/src/Ordering.Api
# - review-service
# - file-service
```

### –®–∞–≥ 5: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A - —á–µ—Ä–µ–∑ SCP (Linux):**
```bash
# –° –≤–∞—à–µ–≥–æ –ü–ö
scp -r services/services/authentication/publish/* root@–≤–∞—à_ip:/var/www/authentication/
scp -r services/services/client-service/src/ClientService.Api/publish/* root@–≤–∞—à_ip:/var/www/client-service/
# ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

**–í–∞—Ä–∏–∞–Ω—Ç B - —á–µ—Ä–µ–∑ FTP/SFTP:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FileZilla –∏–ª–∏ WinSCP
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫–∏ —Å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

**–í–∞—Ä–∏–∞–Ω—Ç C - —á–µ—Ä–µ–∑ Git:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git clone –≤–∞—à_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd androidapp/services/services/authentication
dotnet publish -c Release -o /var/www/authentication
```

### –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–æ–≤ (Linux)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:

**`/etc/systemd/system/authentication.service`:**
```ini
[Unit]
Description=Authentication API Service
After=network.target

[Service]
Type=notify
ExecStart=/usr/bin/dotnet /var/www/authentication/Authentication.Api.dll
Restart=always
RestartSec=10
KillSignal=SIGINT
SyslogIdentifier=authentication-api
User=www-data
Environment=ASPNETCORE_ENVIRONMENT=Production
Environment=ASPNETCORE_URLS=http://localhost:5001

[Install]
WantedBy=multi-user.target
```

**–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å:**
```bash
sudo systemctl daemon-reload
sudo systemctl enable authentication.service
sudo systemctl start authentication.service
sudo systemctl status authentication.service
```

**–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤** (—Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏):
- Authentication: 5001
- Client Service: 5002
- Company Service: 5003
- Category Service: 5004
- Chat Service: 5005
- Ordering API: 5006
- Review Service: 5007
- File Service: 5008

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx Reverse Proxy (Linux)

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx:**
```bash
sudo apt-get install -y nginx
```

**–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `/etc/nginx/sites-available/choice-api.ru`:**
```nginx
server {
    listen 80;
    server_name choice-api.ru www.choice-api.ru;

    # Authentication Service
    location /api/auth/ {
        proxy_pass http://localhost:5001/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Client Service
    location /api/client/ {
        proxy_pass http://localhost:5002/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Company Service
    location /api/company/ {
        proxy_pass http://localhost:5003/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Category Service
    location /api/category/ {
        proxy_pass http://localhost:5004/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Chat Service (SignalR)
    location /api/chat/ {
        proxy_pass http://localhost:5005/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Ordering Service
    location /api/ordering/ {
        proxy_pass http://localhost:5006/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Review Service
    location /api/review/ {
        proxy_pass http://localhost:5007/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # File Service
    location /api/file/ {
        proxy_pass http://localhost:5008/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

**–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
sudo ln -s /etc/nginx/sites-available/choice-api.ru /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (HTTPS)

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot:**
```bash
sudo apt-get install -y certbot python3-certbot-nginx
```

**–ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:**
```bash
sudo certbot --nginx -d choice-api.ru -d www.choice-api.ru
```

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è HTTPS.

---

## üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: SQL Server –Ω–∞ reg.ru

–ï—Å–ª–∏ reg.ru –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç SQL Server:
1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –û–±–Ω–æ–≤–∏—Ç–µ `appsettings.json`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–Ω–µ—à–Ω–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ –ë–î

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–ª–∞—á–Ω—ã–µ –ë–î:
- **Azure SQL Database**
- **AWS RDS**
- **DigitalOcean Managed Databases**

### –í–∞—Ä–∏–∞–Ω—Ç 3: SQL Server –Ω–∞ —Ç–æ–º –∂–µ VPS

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ SQL Server –Ω–∞ Linux:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Microsoft
curl -o /tmp/mssql-server-2022.deb https://packages.microsoft.com/ubuntu/22.04/mssql-server-2022/pool/main/m/mssql-server/mssql-server_16.0.1000.1-1_amd64.deb
sudo dpkg -i /tmp/mssql-server-2022.deb

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SQL Server
sudo /opt/mssql/bin/mssql-conf setup

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL Server
sudo systemctl start mssql-server
sudo systemctl enable mssql-server
```

---

## üê∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RabbitMQ

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å RabbitMQ:**
```bash
sudo systemctl status rabbitmq-server
```

**–í–∫–ª—é—á–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
sudo rabbitmq-plugins enable rabbitmq_management
```

**–î–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:**
- URL: `http://–≤–∞—à_ip:15672`
- –õ–æ–≥–∏–Ω: `guest`
- –ü–∞—Ä–æ–ª—å: `guest` (–∏–∑–º–µ–Ω–∏—Ç–µ!)

---

## ‚öôÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ appsettings.json –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Authentication Service:**

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "JwtSettings": {
    "Issuer": "https://choice-api.ru",
    "Audience": "https://choice-api.ru",
    "Key": "AuthenticationKeyForApiWithLengthof40sym"
  },
  "SqlServerSettings": {
    "ConnectionString": "Server=localhost;Database=AuthenticationDb;User Id=sa;Password=–í–∞—à–ü–∞—Ä–æ–ª—å;TrustServerCertificate=True;"
  },
  "EventBusSettings": {
    "HostAddress": "amqp://guest:guest@localhost:5672"
  },
  "VonageSettings": {
    "ApiKey": "–≤–∞—à_api_key",
    "ApiSecret": "–≤–∞—à_api_secret"
  }
}
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–í `ClientApp/env.js`:**
```javascript
export default {
    api_url: 'https://choice-api.ru',
    auth_url: 'https://choice-api.ru'
}
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å –ë–î
cd /var/www/authentication
dotnet ef database update --project /path/to/project
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç API endpoints:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Authentication Service
curl https://choice-api.ru/api/auth/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Swagger
https://choice-api.ru/api/auth/swagger
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:

```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
sudo journalctl -u authentication.service -f

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/error.log
```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏:

```bash
# –ó–∞–ø—É—Å–∫
sudo systemctl start authentication.service

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop authentication.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart authentication.service

# –°—Ç–∞—Ç—É—Å
sudo systemctl status authentication.service

# –õ–æ–≥–∏
sudo journalctl -u authentication.service -n 50
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl stop authentication.service

# 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
# (—á–µ—Ä–µ–∑ SCP, FTP –∏–ª–∏ Git pull)

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl start authentication.service
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª (–æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã)
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, RAM, Disk)

3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î
   - –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –ó–∞–∫–∞–∑–∞–Ω VPS/VDS –Ω–∞ reg.ru
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω –¥–æ–º–µ–Ω choice-api.ru
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω .NET 8.0 Runtime –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQL Server)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω RabbitMQ
- [ ] –°–æ–±—Ä–∞–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Release —Ä–µ–∂–∏–º–µ
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –°–æ–∑–¥–∞–Ω—ã systemd —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω Nginx reverse proxy
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω SSL (HTTPS)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã appsettings.json –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω env.js –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ API endpoints
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–£–¥–∞—á–∏ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º! üöÄ**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ Nginx.
