# üöÄ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ .NET ‚Üí FastAPI

## üìä –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–¢–µ–∫—É—â–∏–π —Å—Ç–µ–∫:**
- .NET 8.0 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- ASP.NET Core Web API
- Entity Framework Core
- SQL Server / PostgreSQL
- RabbitMQ (MassTransit)
- SignalR
- JWT Bearer Authentication

**–¶–µ–ª–µ–≤–æ–π —Å—Ç–µ–∫:**
- FastAPI (Python 3.11+)
- SQLAlchemy ORM
- PostgreSQL / SQL Server
- RabbitMQ (aio-pika)
- WebSocket (FastAPI)
- JWT Authentication (python-jose)

---

## üó∫Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] 1.1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ FastAPI
- [ ] 1.2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- [ ] 1.3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)
- [ ] 1.4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (.env)
- [ ] 1.5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)

### –≠—Ç–∞–ø 2: –û–±—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] 2.1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- [ ] 2.2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- [ ] 2.3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RabbitMQ (aio-pika)
- [ ] 2.4. –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–µ –º–æ–¥–µ–ª–∏ –∏ —Å—Ö–µ–º—ã
- [ ] 2.5. –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã

### –≠—Ç–∞–ø 3: Authentication Service
- [ ] 3.1. –ú–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (SQLAlchemy)
- [ ] 3.2. JWT —Ç–æ–∫–µ–Ω—ã (python-jose)
- [ ] 3.3. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (Vonage)
- [ ] 3.4. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
- [ ] 3.5. API endpoints (FastAPI)
- [ ] 3.6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

### –≠—Ç–∞–ø 4: Client Service
- [ ] 4.1. –ú–æ–¥–µ–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] 4.2. API endpoints
- [ ] 4.3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- [ ] 4.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

### –≠—Ç–∞–ø 5: Company Service
- [ ] 5.1. –ú–æ–¥–µ–ª–∏ –∫–æ–º–ø–∞–Ω–∏–π
- [ ] 5.2. API endpoints
- [ ] 5.3. –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤
- [ ] 5.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

### –≠—Ç–∞–ø 6: Category Service
- [ ] 6.1. –ú–æ–¥–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- [ ] 6.2. API endpoints
- [ ] 6.3. Seed –¥–∞–Ω–Ω—ã–µ

### –≠—Ç–∞–ø 7: Ordering Service
- [ ] 7.1. –ú–æ–¥–µ–ª–∏ –∑–∞–∫–∞–∑–æ–≤
- [ ] 7.2. API endpoints
- [ ] 7.3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- [ ] 7.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

### –≠—Ç–∞–ø 8: Chat Service
- [ ] 8.1. –ú–æ–¥–µ–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] 8.2. WebSocket endpoints
- [ ] 8.3. Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- [ ] 8.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RabbitMQ

### –≠—Ç–∞–ø 9: Review Service
- [ ] 9.1. –ú–æ–¥–µ–ª–∏ –æ—Ç–∑—ã–≤–æ–≤
- [ ] 9.2. API endpoints

### –≠—Ç–∞–ø 10: File Service
- [ ] 10.1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- [ ] 10.2. –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- [ ] 10.3. API endpoints

### –≠—Ç–∞–ø 11: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] 11.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] 11.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- [ ] 11.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket
- [ ] 11.4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RabbitMQ

### –≠—Ç–∞–ø 12: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π
- [ ] 12.1. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] 12.2. Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] 12.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ø–ª–æ—è
- [ ] 12.4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI

### –û—Å–Ω–æ–≤–Ω—ã–µ:
- `fastapi` - Web framework
- `uvicorn` - ASGI server
- `sqlalchemy` - ORM
- `alembic` - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- `psycopg2-binary` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- `pymssql` - SQL Server –¥—Ä–∞–π–≤–µ—Ä
- `python-jose[cryptography]` - JWT
- `passlib[bcrypt]` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `python-multipart` - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- `aio-pika` - RabbitMQ
- `pydantic` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `pydantic-settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:
- `python-dotenv` - .env —Ñ–∞–π–ª—ã
- `httpx` - HTTP –∫–ª–∏–µ–Ω—Ç
- `vonage` - SMS API
- `email-validator` - –í–∞–ª–∏–¥–∞—Ü–∏—è email

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend_fastapi/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ authentication/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ token_service.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ phone_verification.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ email_verification.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ client_service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ company_service/
‚îÇ   ‚îú‚îÄ‚îÄ category_service/
‚îÇ   ‚îú‚îÄ‚îÄ ordering/
‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îú‚îÄ‚îÄ review_service/
‚îÇ   ‚îî‚îÄ‚îÄ file_service/
‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ security.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îî‚îÄ‚îÄ rabbitmq.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ docker-compose.yml
```

---

## üîÑ –ú–∞–ø–ø–∏–Ω–≥ .NET ‚Üí FastAPI

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã ‚Üí –†–æ—É—Ç–µ—Ä—ã
- `AuthController.cs` ‚Üí `routers/auth.py`
- `CompanyController.cs` ‚Üí `routers/company.py`

### –°–µ—Ä–≤–∏—Å—ã ‚Üí Services
- `TokenService.cs` ‚Üí `services/token_service.py`
- `PhoneVerificationService.cs` ‚Üí `services/phone_verification.py`

### –ú–æ–¥–µ–ª–∏ ‚Üí SQLAlchemy Models
- `User.cs` ‚Üí `models.py` (SQLAlchemy)
- `Company.cs` ‚Üí `models.py` (SQLAlchemy)

### DTO ‚Üí Pydantic Schemas
- `UserViewModel.cs` ‚Üí `schemas.py` (Pydantic)

### Entity Framework ‚Üí SQLAlchemy
- `DbContext` ‚Üí `SessionLocal`
- `DbSet<T>` ‚Üí `session.query(Model)`

### MassTransit ‚Üí aio-pika
- `IPublishEndpoint` ‚Üí `aio_pika.Channel`
- `IConsumer<T>` ‚Üí `async def consume(message)`

### SignalR ‚Üí WebSocket
- `Hub` ‚Üí `WebSocket` endpoint
- `Clients.All.SendAsync()` ‚Üí `await websocket.send_json()`

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### .env —Ñ–∞–π–ª:
```env
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
SQL_SERVER_CONNECTION=Server=localhost;Database=dbname;...

# JWT
JWT_SECRET_KEY=your-secret-key
JWT_ALGORITHM=HS256
JWT_ISSUER=your-issuer
JWT_AUDIENCE=your-audience

# RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# Vonage (SMS)
VONAGE_API_KEY=your-key
VONAGE_API_SECRET=your-secret

# Services URLs
AUTH_SERVICE_URL=http://localhost:8001
CLIENT_SERVICE_URL=http://localhost:8002
COMPANY_SERVICE_URL=http://localhost:8003
```

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
uvicorn services.authentication.main:app --port 8001 --reload
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (async/await)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- WebSocket –¥–ª—è real-time —á–∞—Ç–∞
- RabbitMQ –¥–ª—è event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
